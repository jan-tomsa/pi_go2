<blocks app="Snap! 5.0, http://snap.berkeley.edu" version="1"><block-definition s="%&apos;method&apos; url: %&apos;url&apos; send: %&apos;payload&apos; headers: %&apos;headers&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%s" readonly="true">GET<options>GET&#xD;POST&#xD;PUT&#xD;DELETE</options></input><input type="%s">http://snap.berkeley.edu</input><input type="%s"></input><input type="%mult%l" readonly="true"></input></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>method</l><l>url</l><l>data</l><l>headers</l><l>proc</l></list><l>var response, i, header;&#xD;if (!proc.httpRequest) {&#xD;  proc.httpRequest = new XMLHttpRequest();&#xD;  proc.httpRequest.open(method, url, true);&#xD;  proc.assertType(headers, &apos;list&apos;);&#xD;  for (i = 1; i &lt;= headers.length(); i += 1) {&#xD;    header = headers.at(i);&#xD;    proc.assertType(header, &apos;list&apos;);&#xD;    proc.httpRequest.setRequestHeader(&#xD;      header.at(1),&#xD;      header.at(2)&#xD;    );&#xD;  }&#xD;  proc.httpRequest.send(data || null);&#xD;} else if (proc.httpRequest.readyState === 4) {&#xD;  response = proc.httpRequest.responseText;&#xD;  proc.httpRequest = null;&#xD;  return response;&#xD;}&#xD;proc.pushContext(&apos;doYield&apos;);&#xD;proc.pushContext();</l></block><list><block var="method"/><block var="url"/><block var="payload"/><block var="headers"/></list></block></block></script></block-definition><block-definition s="current location" type="reporter" category="sensing"><comment x="0" y="0" w="200" collapsed="false">Reports a three-item list containing the latitude and longitude of the user, and the precision of the measurements.  Works only if the user allows snap.berkeley.edu access to location data.  Some browsers also require an HTTPS connection to Snap!.</comment><header></header><code></code><translations></translations><inputs></inputs><script><block s="doReport"><block s="evaluate"><block s="reportJSFunction"><list><l>proc</l></list><l>if (!proc.geostarted) {&#xD;  var geo = navigator.geolocation;&#xD;  var cords = [];&#xD;  var options = {&#xD;    enableHighAccuracy: false,&#xD;  };&#xD;&#xD;  function success(pos) {&#xD;    console.log(pos);&#xD;    proc.geocords = [pos.coords.latitude,&#xD;                     pos.coords.longitude,&#xD;                     pos.coords.accuracy];&#xD;  }&#xD;&#xD;  function error(err) {&#xD;    alert("ERROR " + err.code + ": " + err.message);&#xD;  }&#xD;  proc.geostarted = true;&#xD;  proc.geocords = null;&#xD;  console.log("starting geolocation")&#xD;  geo.getCurrentPosition(success, error, options);&#xD;} else if (proc.geocords) {&#xD;  var cords = proc.geocords;&#xD;  proc.geostarted = null;&#xD;  proc.geocords = null;&#xD;  console.log("returning");&#xD;  return new List(cords);&#xD;} else {&#xD;  console.log("yielding");&#xD;  proc.pushContext(&apos;doYield&apos;);&#xD;  proc.pushContext();&#xD;}</l></block><list></list></block></block></script></block-definition><block-definition s="test %&apos;status&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%b"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doIfElse"><block var="status"/><script><block s="doSetVar"><l>response</l><block s="reportURL"><l>http://localhost:5555/test/</l></block></block></script><script><block s="doSetVar"><l>response</l><block s="reportURL"><l>http://localhost:5555/test2/</l></block></block></script></block></script></block-definition><block-definition s="GPIO_write %&apos;pin&apos; %&apos;status&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%b"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doDeclareVariables"><list><l>status_int</l></list></block><block s="doSetVar"><l>status_int</l><custom-block s="if %b then %anyUE else %anyUE"><block var="status"/><l>1</l><l>0</l></custom-block></block><block s="doSetVar"><l>response</l><block s="reportURL"><block s="reportJoinWords"><list><block var="RPi_base_URL"/><l>write/</l><block var="pin"/><l>/?val=</l><block var="status_int"/></list></block></block></block></script></block-definition><block-definition s="GPIO_read %&apos;pin&apos;" type="reporter" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doSetVar"><l>response</l><block s="reportURL"><block s="reportJoinWords"><list><block var="RPi_base_URL"/><l>read/</l><block var="pin"/><l>/</l></list></block></block></block><block s="doReport"><block var="response"/></block></script></block-definition><block-definition s="GPIO_set_mode %&apos;pin&apos; %&apos;mode&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%txt"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doSetVar"><l>response</l><block s="reportURL"><block s="reportJoinWords"><list><block var="RPi_base_URL"/><l>set_mode/</l><block var="pin"/><l>/?mode=</l><block var="mode"/></list></block></block></block></script></block-definition><block-definition s="PiconZero %&apos;motor&apos; %&apos;speed&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n"></input><input type="%n"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doSetVar"><l>response</l><block s="reportURL"><block s="reportJoinWords"><list><block var="RPi_base_URL"/><l>piconzero/</l><block var="motor"/><l>/?speed=</l><block var="speed"/></list></block></block></block><block s="doThink"><block var="response"/></block></script></block-definition><block-definition s="AFMotor %&apos;motor&apos; %&apos;direction&apos; %&apos;speed&apos;" type="command" category="sensing"><header></header><code></code><translations></translations><inputs><input type="%n"><options>1&#xD;2&#xD;3&#xD;4</options></input><input type="%txt"><options>FORWARD&#xD;BACKWARD&#xD;STOP</options></input><input type="%n"></input></inputs><script><block s="doDeclareVariables"><list><l>response</l></list></block><block s="doSetVar"><l>response</l><block s="reportURL"><block s="reportJoinWords"><list><block var="RPi_base_URL"/><l>afmotor/</l><block var="motor"/><l>/?speed=</l><block var="speed"/><l>&amp;dir=</l><block var="direction"/></list></block></block></block></script></block-definition><block-definition s="Točna cw %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>točna_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>1</l><block var="točna_rychlost"/></custom-block></script></block-definition><block-definition s="Točna ccw %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>točna_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>1</l><block s="reportDifference"><l>0</l><block var="točna_rychlost"/></block></custom-block></script></block-definition><block-definition s="Točna stop" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="točna_rychlost"/><l>0</l></block></block><script><custom-block s="PiconZero %n %n"><l>1</l><l>0</l></custom-block></script></block></script></block-definition><block-definition s="Loket nahoru %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>loket_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>0</l><block s="reportDifference"><l></l><block var="loket_rychlost"/></block></custom-block></script></block-definition><block-definition s="Loket dolů %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>loket_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>0</l><block var="loket_rychlost"/></custom-block></script></block-definition><block-definition s="Loket stop" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="loket_rychlost"/><l>0</l></block></block><script><custom-block s="PiconZero %n %n"><l>0</l><l>0</l></custom-block></script></block></script></block-definition><block-definition s="Rameno nahoru %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>rameno_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>2</l><block s="reportDifference"><l></l><block var="rameno_rychlost"/></block></custom-block></script></block-definition><block-definition s="Rameno dolů %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>rameno_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>2</l><block var="rameno_rychlost"/></custom-block></script></block-definition><block-definition s="Rameno stop" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="rameno_rychlost"/><l>0</l></block></block><script><custom-block s="PiconZero %n %n"><l>2</l><l>0</l></custom-block></script></block></script></block-definition><block-definition s="Klepítka otevřít %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>klepítka_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>3</l><block var="klepítka_rychlost"/></custom-block></script></block-definition><block-definition s="Klepítka zavřít %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>klepítka_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>3</l><block s="reportDifference"><l></l><block var="klepítka_rychlost"/></block></custom-block></script></block-definition><block-definition s="Klepítka stop" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="klepítka_rychlost"/><l>0</l></block></block><script><custom-block s="PiconZero %n %n"><l>3</l><l>0</l></custom-block></script></block></script></block-definition><block-definition s="Zápěstí cw %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>zápěstí_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>4</l><block var="zápěstí_rychlost"/></custom-block></script></block-definition><block-definition s="Zápěstí ccw %&apos;rychlost&apos;" type="command" category="looks"><header></header><code></code><translations></translations><inputs><input type="%n">100</input></inputs><script><block s="doSetVar"><l>zápěstí_rychlost</l><block var="rychlost"/></block><custom-block s="PiconZero %n %n"><l>4</l><block s="reportDifference"><l></l><block var="zápěstí_rychlost"/></block></custom-block></script></block-definition><block-definition s="Zápěstí stop" type="command" category="looks"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doIf"><block s="reportNot"><block s="reportEquals"><block var="zápěstí_rychlost"/><l>0</l></block></block><script><custom-block s="PiconZero %n %n"><l>4</l><l>0</l></custom-block></script></block></script></block-definition><block-definition s="SetupPIGO2" type="command" category="variables"><header></header><code></code><translations></translations><inputs></inputs><script><block s="doSetVar"><l>RPi_base_URL</l><block s="evaluate"><block s="reportJSFunction"><list><l></l></list><l>return window.location.hostname + &apos;/pi_go2/&apos;;</l></block><list></list></block></block></script></block-definition></blocks>